{% extends "base.html" %}
{% load shop_filters %}

{% block title %}Merci — {{ site_name }}{% endblock %}

{% block content %}
  <div class="rounded-3xl border border-emerald-200 bg-emerald-50 p-8">
    <div class="text-sm font-semibold text-emerald-900">Commande confirmée</div>
    <h1 class="mt-2 text-3xl font-extrabold tracking-tight text-emerald-950">Merci pour votre commande.</h1>
    <p class="mt-2 text-sm text-emerald-900/80">
      Nous vous contacterons pour confirmer la livraison et le paiement.
    </p>
  </div>

  <div class="mt-6 grid gap-6 lg:grid-cols-3">
    <div class="lg:col-span-2">
      <div class="rounded-2xl border border-slate-200 bg-white p-5">
        <div class="flex flex-wrap items-center justify-between gap-3">
          <div>
            <div class="text-sm text-slate-500">Commande</div>
            <div class="text-xl font-extrabold">#{{ order.id }}</div>
          </div>
          <div class="rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white">
            {{ order.get_status_display }}
          </div>
        </div>

        <div class="mt-5 grid gap-4 md:grid-cols-2">
          <div class="rounded-xl bg-slate-50 p-4">
            <div class="text-xs font-semibold text-slate-500">Client</div>
            <div class="mt-1 font-semibold">{{ order.customer_name }}</div>
            <div class="mt-1 text-sm text-slate-600">{{ order.customer_phone }}</div>
            {% if order.customer_email %}
              <div class="mt-1 text-sm text-slate-600">{{ order.customer_email }}</div>
            {% endif %}
          </div>
          <div class="rounded-xl bg-slate-50 p-4">
            <div class="text-xs font-semibold text-slate-500">Adresse</div>
            <div class="mt-1 text-sm text-slate-700">{{ order.address }}</div>
            <div class="mt-1 text-sm text-slate-700">{{ order.city }}</div>
            <div class="mt-2 text-xs text-slate-500">Paiement: {{ order.get_payment_method_display }}</div>
          </div>
        </div>

        <div class="mt-6">
          <div class="text-sm font-semibold">Articles</div>
          <div class="mt-3 divide-y divide-slate-100 rounded-xl border border-slate-200">
            {% for item in order.items.all %}
              <div class="flex items-start justify-between gap-3 p-4 text-sm">
                <div class="flex-1">
                  <div class="font-semibold">{{ item.product_name }}</div>
                  <div class="mt-1 text-slate-500">× {{ item.quantity }}</div>
                </div>
                <div class="font-semibold">{{ item.line_total_xof|xof }}</div>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>

    <div>
      <div class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm">
        <div class="text-sm text-slate-500">Total</div>
        <div class="mt-1 text-2xl font-extrabold">{{ order.total_xof|xof }}</div>
        <a
          href="{% url 'shop:product_list' %}"
          class="mt-5 block rounded-xl bg-slate-900 px-4 py-3 text-center text-sm font-semibold text-white hover:bg-slate-800"
        >
          Retour à la boutique
        </a>
      </div>
    </div>
  </div>
{% endblock %}

